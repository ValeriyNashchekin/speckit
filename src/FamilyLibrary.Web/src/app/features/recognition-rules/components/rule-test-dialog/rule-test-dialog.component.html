<p-dialog
  header="Test Rule"
  [visible]="visible()"
  [modal]="true"
  [closable]="true"
  [draggable]="true"
  [resizable]="false"
  [style]="{ width: '32rem' }"
  (onHide)="onHide()"
>
  <div class="space-y-4">
    <div class="flex flex-col gap-2">
      <label for="familyName" class="text-sm font-medium text-gray-700">
        Family Name to Test
      </label>
      <div class="flex gap-2">
        <input
          pInputText
          id="familyName"
          type="text"
          [(ngModel)]="familyName"
          placeholder="Enter family name..."
          class="flex-1"
          (keydown.enter)="onTest()"
        />
        <p-button
          label="Test"
          icon="pi pi-play"
          [loading]="isTesting()"
          [disabled]="!canTest"
          (onClick)="onTest()"
        />
      </div>
    </div>

    @if (testResult() !== null) {
      <div
        class="mt-4 p-4 rounded-lg border"
        [class.border-green-200]="testResult()"
        [class.bg-green-50]="testResult()"
        [class.border-red-200]="!testResult()"
        [class.bg-red-50]="!testResult()"
      >
        <div class="flex items-center gap-2">
          @if (testResult()) {
            <i class="pi pi-check-circle text-green-600 text-lg"></i>
            <span class="font-medium text-green-700">Match Found!</span>
          } @else {
            <i class="pi pi-times-circle text-red-600 text-lg"></i>
            <span class="font-medium text-red-700">No Match</span>
          }
        </div>
      </div>
    }
  </div>

  <ng-template #footer>
    <div class="flex justify-end">
      <p-button
        label="Close"
        severity="secondary"
        [outlined]="true"
        (onClick)="onHide()"
      />
    </div>
  </ng-template>
</p-dialog>
