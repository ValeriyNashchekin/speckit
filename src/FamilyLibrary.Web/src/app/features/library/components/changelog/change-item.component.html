<div class="flex flex-col gap-3 p-4 bg-white rounded-lg border border-gray-200">
  <!-- Category Header -->
  <div class="flex items-center gap-2">
    <i [class]="categoryConfig().icon" class="text-lg" aria-hidden="true"></i>
    <p-tag [value]="categoryConfig().label" [severity]="categoryConfig().severity" />
  </div>

  <!-- Name/Category Change: previous -> current -->
  @if (hasValueChange()) {
    <div class="flex items-center gap-2 text-sm">
      @if (changeItem().previousValue; as prev) {
        <span class="text-gray-500 line-through">{{ prev }}</span>
        <i class="pi pi-arrow-right text-gray-400" aria-hidden="true"></i>
      }
      @if (changeItem().currentValue; as curr) {
        <span class="font-medium text-gray-900">{{ curr }}</span>
      }
    </div>
  }

  <!-- Types Change: added/removed items -->
  @if (hasListChange()) {
    <div class="flex flex-col gap-2">
      @if (changeItem().addedItems; as added) {
        @if (added.length > 0) {
          <div class="flex flex-wrap items-center gap-2">
            <span class="text-xs font-medium text-green-700">Added:</span>
            @for (item of added; track item) {
              <p-chip [label]="item" class="text-xs" />
            }
          </div>
        }
      }
      @if (changeItem().removedItems; as removed) {
        @if (removed.length > 0) {
          <div class="flex flex-wrap items-center gap-2">
            <span class="text-xs font-medium text-red-700">Removed:</span>
            @for (item of removed; track item) {
              <p-chip [label]="item" class="text-xs opacity-60" />
            }
          </div>
        }
      }
    </div>
  }

  <!-- Parameters Change: list of parameter changes -->
  @if (hasParameterChanges()) {
    <div class="flex flex-col gap-2">
      @if (changeItem().parameterChanges; as params) {
        @for (param of params; track param.name) {
          <div class="flex items-center gap-2 text-sm p-2 bg-gray-50 rounded">
            <span class="font-medium text-gray-700">{{ param.name }}:</span>
            @if (param.previousValue) {
              <span class="text-gray-500">{{ param.previousValue }}</span>
              <i class="pi pi-arrow-right text-gray-400" aria-hidden="true"></i>
            }
            <span class="text-gray-900">{{ param.currentValue ?? '(empty)' }}</span>
          </div>
        }
      }
    </div>
  }

  <!-- Geometry Change: icon only with note -->
  @if (changeItem().category === 'Geometry') {
    <div class="flex items-center gap-2 text-sm text-gray-600 italic">
      <i class="pi pi-exclamation-triangle text-amber-500" aria-hidden="true"></i>
      <span>Geometry hash changed - visual inspection required</span>
    </div>
  }

  <!-- Txt Change: hash comparison -->
  @if (changeItem().category === 'Txt') {
    <div class="flex items-center gap-2 text-sm text-gray-600">
      <i class="pi pi-info-circle text-blue-500" aria-hidden="true"></i>
      <span>Txt file hash changed - content may differ</span>
    </div>
  }
</div>
